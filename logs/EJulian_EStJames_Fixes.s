
; modify number of lanes
RUN PGM=network
  NETI[1] = "M:\Application\Model One\Networks\TM1_2015_Base_Network\hwy\freeflow.net"
  LINKI[2]= "mod_links_EJulianEStJames.csv", VAR=A,B,_PROJECT(C),_PROJ_LANES START=(substr(record,1,2)='A,B,')
  NETO    = freeflow_temp.net, EXCLUDE=_PROJ_LANES, _PROJECT
  
  PHASE=LINKMERGE
    IF (LI.2._PROJECT == 'Base_year_fix' )
      ; change the number of lanes to 2 (from 3 in the original 2015 network)
      LANES = LI.2._PROJ_LANES
  
      _LINKS_MOD = _LINKS_MOD + 1
    ENDIF
  ENDPHASE
  
ENDRUN


; add links
RUN PGM=NETWORK
NETI[1]=freeflow_temp.net
NETO=freeflow_new.net, EXCLUDE=ACTION, PROJECT
LINKI[2]="add_links_EJulianEStJames.csv" VAR=ACTION(C),A,B,PROJECT(C),DISTANCE,SPDCLASS,CAPCLASS,LANES,TSIN,GL,USE,OT,CAP,AT,FT,SIGCOR,TOS,AUX,YEAR,FFS,FFT,FT2000,ROUTENUM,HOT,TOLLCLASS,STATE,CITYID,CITYNAME(C),REGFREIGHT,BRT,TOLLEA_DA,TOLLEA_S2,TOLLEA_S3,TOLLEA_VSM,TOLLEA_SML,TOLLEA_MED,TOLLEA_LRG,TOLLAM_DA,TOLLAM_S2,TOLLAM_S3,TOLLAM_VSM,TOLLAM_SML,TOLLAM_MED,TOLLAM_LRG,TOLLMD_DA,TOLLMD_S2,TOLLMD_S3,TOLLMD_VSM,TOLLMD_SML,TOLLMD_MED,TOLLMD_LRG,TOLLPM_DA,TOLLPM_S2,TOLLPM_S3,TOLLPM_VSM,TOLLPM_SML,TOLLPM_MED,TOLLPM_LRG,TOLLEV_DA,TOLLEV_S2,TOLLEV_S3,TOLLEV_VSM,TOLLEV_SML,TOLLEV_MED,TOLLEV_LRG,ROUTEDIR(C),
                     START=(substr(record,1,64)='ACTION,A,B,')

PHASE=LINKMERGE

 IF (LI.2.PROJECT == 'Base_year_fix' )
  
 DISTANCE = LI.2.DISTANCE
 SPDCLASS = LI.2.SPDCLASS
 CAPCLASS = LI.2.CAPCLASS
 LANES    = LI.2.LANES
 TSIN     = LI.2.TSIN
 GL       = LI.2.GL
 USE      = LI.2.USE
 OT       = LI.2.OT
 CAP      = LI.2.CAP
 AT       = LI.2.AT
 FT       = LI.2.FT
 SIGCOR   = LI.2.SIGCOR
 TOS      = LI.2.TOS
 AUX      = LI.2.AUX
 YEAR     = LI.2.YEAR
 ROUTENUM = LI.2.ROUTENUM
 HOT      = LI.2.HOT
 TOLLCLASS= LI.2.TOLLCLASS
 STATE    = LI.2.STATE
 CITYID   = LI.2.CITYID
 CITYNAME = 'San Jose'
 REGFREIGHT= LI.2.REGFREIGHT
 BRT      = LI.2.BRT
 ROUTEDIR = Li.2.ROUTEDIR

ENDIF

ENDPHASE

ENDRUN
*copy /y freeflow_new.net freeflow.net



